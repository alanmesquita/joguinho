<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="author" content="" />
	<meta name="description" content="" />

 	<title>Alan Mesquita de Sousa</title>

 	<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />-->

 	<!-- CSS -->
  	<link href="css/reset.css" media="screen" rel="stylesheet" type="text/css" />
  	<link href="css/style.css" media="screen" rel="stylesheet" type="text/css" />

  	<!-- SCRIPTS -->
  	<script src="js/jquery.js"></script>

  	<script type="text/javascript">
  		$(function(){

  			const FPS = 30;

  			//criar canvas
  			var canvas = document.createElement("canvas");
  			var ctx = canvas.getContext("2d");
			canvas.width = 512;
			canvas.height = 480;
			document.body.appendChild(canvas);

			//nav img
			var navinhaReady = false;
			var navinhaImage = new Image();
			navinhaImage.onload = function(){
				navinhaReady = true;
			};
			navinhaImage.src = 'css/images/hellhound.gif';

			//objetos do jogo
			var navinha = {
				speed : 150,
				rotateSpeed : 6,
				angle : 0
			}

			//controlador do teclado
			var keyDowns = {};

			addEventListener('keydown', function (e) {
				keyDowns[e.keyCode] = true;
			}, false);

			addEventListener('keyup', function (e) {
				delete keyDowns[e.keyCode];
			}, false);

			// Resetando o jogo
			var reset = function () {
				navinha.x = canvas.width / 2;
				navinha.y = canvas.height / 2;
			};

			//controla os updates
			var update = function (modifier) {
				//cima
				if (38 in keyDowns) {
					navinha.y -= navinha.speed * modifier;
				}

				//baixo
				if (40 in keyDowns) {
					navinha.y += navinha.speed * modifier;
				}

				//esquerda
				if (37 in keyDowns) {
					navinha.angle -= navinha.rotateSpeed;
					//navinha.x -= navinha.speed * modifier;
				}

				//direita
				if (39 in keyDowns) {
					navinha.angle += navinha.rotateSpeed;
					//navinha.x += navinha.speed * modifier;
				}
			}

			//render na tela
			var render = function () {

				if (navinhaReady) {
					ctx.translate(navinha.x+(navinhaImage.width/2), navinha.y+(navinhaImage.height/2));
					ctx.rotate(navinha.angle * Math.PI / 180);

					ctx.drawImage(navinhaImage, 0, 0, navinhaImage.width, navinhaImage.height, -(navinhaImage.width/2), -(navinhaImage.height/2), navinhaImage.width, navinhaImage.height);

					//ctx.drawImage(navinhaImage, navinha.x, navinha.y);
				};
			}

			// loop do jogo
			var main = function () {
				var now = Date.now();
				var delta = now - then;
				update(delta / 1000);
				
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				ctx.save();

				render();
				
				ctx.restore();

				then = now;
			};

			reset();
			var then = Date.now();
			setInterval(main, FPS); 
  		})
  	</script>

</head>
<body>

</body>
</html>
